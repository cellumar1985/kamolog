
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>kamolog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: sans-serif;
      padding: 10px;
    }
    input, button {
      display: block;
      margin: 8px 0;
      font-size: 16px;
    }
    img {
      max-width: 100%;
      margin-top: 5px;
    }
    .record {
      border-bottom: 1px solid #ccc;
      padding: 8px 0;
    }
  </style>
</head>

<body>

  <h1>ü¶Ü „Ç´„É¢„É≠„Ç∞</h1>

  <!-- ÂÖ•Âäõ„Éï„Ç©„Éº„É† -->
  <input type="text" id="kamo" placeholder="„Ç´„Éº„É¢„ÅÆÂêçÂâçÔºà‰æãÔºö„Ç´„É´„Ç¨„Éº„É¢Ôºâ">
  <input type="text" id="place" placeholder="Â†¥ÊâÄÔºà‰æãÔºö„ÅÇ„Å•„ÅæÈÅãÂãïÂÖ¨ÂúíÔºâ">
  <input type="file" id="photo" accept="image/*">
  <button onclick="saveRecord()">‰øùÂ≠ò</button>

  <hr>

  <!-- Ë°®Á§∫„Ç®„É™„Ç¢ -->
  <div id="recordList"></div>

  <!-- ‚òÖ JavaScript„ÅØ„Åì„Åì„Å†„Åë ‚òÖ -->
  <script>
    // „Éá„Éº„ÇøÁΩÆ„ÅçÂ†¥
    let kamoRecords = [];

    // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÊôÇ„Å´‰øùÂ≠ò„Éá„Éº„Çø„ÇíË™≠„ÇÄ
    loadRecords();

    function saveRecord() {
      alert("‰øùÂ≠ò„Éú„Çø„É≥Êäº„Åï„Çå„Åü„Ç¨ÔºÅ");

      const kamo = document.getElementById("kamo").value;
      const place = document.getElementById("place").value;
      const fileInput = document.getElementById("photo");
      const file = fileInput.files[0];

      if (file) {
        const reader = new FileReader();
        reader.onload = function () {
          addRecord(kamo, place, reader.result);
        };
        reader.readAsDataURL(file);
      } else {
        addRecord(kamo, place, null);
      }
    }

    function addRecord(kamo, place, imageBase64) {
      alert("‰øùÂ≠òÂÆå‰∫Ü„Ç¨„ÉºÔºÅ");

      const record = {
        kamo: kamo,
        place: place,
        photo: imageBase64
      };

      kamoRecords.push(record);
      localStorage.setItem("kamolog", JSON.stringify(kamoRecords));

      renderRecords();
      clearForm();
    }

    function renderRecords() {
      const list = document.getElementById("recordList");
      list.innerHTML = "";

      kamoRecords.forEach(r => {
        const div = document.createElement("div");
        div.className = "record";
        div.innerHTML = `
          <p>ü¶Ü ${r.kamo} / üìç ${r.place}</p>
          ${r.photo ? `<img src="${r.photo}">` : ""}
        `;
        list.appendChild(div);
      });
    }

    function loadRecords() {
      const saved = localStorage.getItem("kamolog");
      if (saved) {
        kamoRecords = JSON.parse(saved);
        renderRecords();
      }
    }

    function clearForm() {
      document.getElementById("kamo").value = "";
      document.getElementById("place").value = "";
      document.getElementById("photo").value = "";
    }
  </script>

</body>
</html>
